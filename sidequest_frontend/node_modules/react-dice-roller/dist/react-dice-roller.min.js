!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],t):(e=e||self)["react-dice-roller"]=t(e.React,e.PropTypes)}(this,function(o,e){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}o=o&&o.hasOwnProperty("default")?o.default:o,e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=l(this,s(r).call(this,e))).state={value:null,rolling:!1,hovering:!1,progress:0},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,o.Component),function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(r,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"roll",value:function(){this.setState({value:Math.floor(Math.random()*this.props.sides+1),progress:Math.floor((Date.now()-this.start)/(1e3*this.props.rollSeconds)*100)}),this.nextRoll()}},{key:"nextRoll",value:function(){var e=this;this.timer=setTimeout(function(){return e.roll()},this.interval);var t=1e3*this.props.rollSeconds-(Date.now()-this.start);if(t>=1e3*this.props.rollSeconds/(10/3)?this.interval=10:this.interval*=1.4,t<=100)return clearTimeout(this.timer),void this.done()}},{key:"throw",value:function(){this.setState({rolling:!0,progress:0}),this.start=Date.now(),this.interval=1,this.nextRoll()}},{key:"done",value:function(){this.setState({rolling:!1,progress:100})}},{key:"getDefaultStyleDice",value:function(){return this.props.diceClassName?null:{border:"1px solid black",cursor:"pointer",width:"90px",height:"90px",textAlign:"center",fontSize:"50px",fontWeight:"bold",verticalAlign:"middle",fontFamily:"cursive",lineHeight:"80px"}}},{key:"getDefaultStyleOverlay",value:function(){return this.props.overlayClassName?null:{width:"90px",height:"90px",position:"absolute",fontSize:"40px",backgroundColor:"rgba(108, 122, 137, 0.8)",color:"white"}}},{key:"getOverlay",value:function(){return this.state.rolling||!this.state.hovering&&null!=this.state.value?null:o.createElement("div",{style:this.getDefaultStyleOverlay(),className:this.props.overlayClassName},"Roll")}},{key:"getProgressBar",value:function(){if(!this.props.showProgress)return null;var e={width:this.state.progress+"%"};return this.props.progressClassName||(e.height="3px",e.backgroundColor="black"),o.createElement("div",{style:e,className:this.props.progressClassName})}},{key:"render",value:function(){var e=this,t=this.state.value;return null===t&&(t="Roll"),o.createElement("div",{onClick:function(){return e.throw()},style:this.getDefaultStyleDice(),className:this.props.diceClassName,onMouseMove:function(){e.setState({hovering:!0})},onMouseLeave:function(){e.setState({hovering:!1})}},this.getProgressBar(),this.getOverlay(),this.state.value,o.createElement("div",null))}}]),r}();return t.defaultProps={sides:6,rollSeconds:2,showProgress:!1},t.propTypes={sides:e.number,rollSeconds:e.number,showProgress:e.bool,diceClassName:e.string,overlayClassName:e.string,progressClassName:e.string},t});
